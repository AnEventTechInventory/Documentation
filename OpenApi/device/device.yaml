device:
  type: "object"
  required:
    - "id"
    - "type"
    - "location"
  properties:
    id:
      type: "string"
      format: "uuid"
    type:
      $ref: "device-type.yaml#/device-type"
    location:
      $ref: "location.yaml#/location"
    contents:
      type: "array"
      items:
        type: string
        format: uuid

get-count-dev:
  get:
    summary: "Get the total device count"
    operationId: "getDeviceCount"
    responses:
      200:
        description: "OK"
        content:
          application/json:
            schema:
              type: "object"
              required:
                - "count"
              properties:
                count:
                  type: "integer"
                  format: "int64"
                  description: "Returns the total number of devices"
list-all-dev:
  get:
    summary: "List uuids of devices"
    operationId: "listDevices"
    parameters:
      - $ref: "../parameters.yaml#/offset"
      - $ref: "../parameters.yaml#/limit"
    responses:
      200:
        $ref: "../responses.yaml#/item-count"
single-dev:
  get:
    summary: "Get a device by ID"
    operationId: "getDeviceById"
    parameters:
      - $ref: "../parameters.yaml#/id"
    responses:
      200:
        description: "OK"
        content:
          application/json:
            schema:
              $ref: "#/device"
      404:
        description: "Not found"
  post:
    summary: "Create a new device"
    operationId: "createDevice"
    parameters:
      - $ref: "../parameters.yaml#/id"
    requestBody:
      description: "The device to create"
      required: true
      content:
        application/json:
          schema:
            $ref: "#/device"
    responses:
      201:
        description: "Created"
        content:
          application/json:
            schema:
              $ref: "#/device"
      400:
        $ref: "../responses.yaml#/error-message"
      409:
        description: "Conflict, should not happen since uuids are generated by the backend"
  patch:
    summary: "Update a device"
    operationId: "updateDevice"
    parameters:
      - $ref: "../parameters.yaml#/id"
    requestBody:
      description: "The device to update. Not all fields are required, only the ones to update"
      required: true
      content:
        application/json:
          schema:
            $ref: "#/device"
    responses:
      200:
        description: "OK"
        content:
          application/json:
            schema:
              $ref: "#/device"
      400:
        $ref: "../responses.yaml#/error-message"
  delete:
    summary: "Delete a device"
    operationId: "deleteDevice"
    parameters:
      - $ref: "../parameters.yaml#/id"
    responses:
      204:
        description: "No content"
      404:
        description: "Not found"