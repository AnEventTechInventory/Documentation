device-type:
  type: "object"
  required:
    - "id"
    - "name"
    - "manufacturer"
  properties:
    id:
      type: "string"
      format: "uuid"
    name:
      type: "string"
    description:
      type: "string"
    manufacturer:
      $ref: "manufacturer.yaml#/manufacturer"
    ean:
      type: "string"
    image:
      type: "string"
      format: "base64"
    tags:
      type: "array"
      items:
        $ref: "tag.yaml#/tag"
    custom-properties:
      $ref: "custom-properties.yaml#/custom-properties"

get-count-type:
  get:
    summary: "Get the total device type count"
    operationId: "getDeviceTypeCount"
    responses:
      200:
        $ref: "../responses.yaml#/item-count"
list-all-type:
  get:
    summary: "List uuids of device types"
    operationId: "listDeviceTypes"
    parameters:
      - $ref: "../parameters.yaml#/offset"
      - $ref: "../parameters.yaml#/limit"
    responses:
      200:
        $ref: "../responses.yaml#/uuid-list"
single-type:
  get:
    summary: "Get a device type by ID"
    operationId: "getDeviceTypeById"
    parameters:
      - $ref: "../parameters.yaml#/id"
    responses:
      200:
        description: "OK"
        content:
          application/json:
            schema:
              $ref: "#/device-type"
      404:
        description: "Not found"
  post:
    summary: "Create a new device type"
    operationId: "createDeviceType"
    parameters:
      - $ref: "../parameters.yaml#/id"
    requestBody:
      description: "The device type to create"
      required: true
      content:
        application/json:
          schema:
            $ref: "#/device-type"
    responses:
      201:
        description: "Created"
        content:
          application/json:
            schema:
              $ref: "#/device-type"
      400:
        description: "Bad request, some required fields are missing or malformed"
        content:
          application/json:
            schema:
              type: "object"
              required:
                - "error"
              properties:
                error:
                  type: "string"
                  description: "The error message"
      409:
        description: "Conflict, should not happen since uuids are generated by the backend"
  patch:
    summary: "Update a device type"
    operationId: "updateDeviceType"
    parameters:
      - $ref: "../parameters.yaml#/id"
    requestBody:
      description: "The device type to update. Not all fields are required, only the ones to update"
      required: true
      content:
        application/json:
          schema:
            $ref: "#/device-type"
    responses:
      200:
        description: "OK"
        content:
          application/json:
            schema:
              $ref: "#/device-type"
      400:
        description: "Bad request, some required fields are missing or malformed"
        content:
          application/json:
            schema:
              type: "object"
              required:
                - "error"
  delete:
    summary: "Delete a device type"
    operationId: "deleteDeviceType"
    parameters:
      - $ref: "../parameters.yaml#/id"
    responses:
      204:
        description: "No content"
      404:
        $ref: "../responses.yaml#/error-message"